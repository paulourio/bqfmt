// Code generated by gocc; DO NOT EDIT.

package lexer

import (
	"io/ioutil"
	"unicode/utf8"

	"github.com/paulourio/bqfmt/zetasql/token"
)

const (
	NoState    = -1
	NumStates  = 781
	NumSymbols = 1053
)

type Lexer struct {
	src     []byte
	pos     int
	line    int
	column  int
	Context token.Context
}

func NewLexer(src []byte) *Lexer {
	lexer := &Lexer{
		src:     src,
		pos:     0,
		line:    1,
		column:  1,
		Context: nil,
	}
	return lexer
}

// SourceContext is a simple instance of a token.Context which
// contains the name of the source file.
type SourceContext struct {
	Filepath string
}

func (s *SourceContext) Source() string {
	return s.Filepath
}

func NewLexerFile(fpath string) (*Lexer, error) {
	src, err := ioutil.ReadFile(fpath)
	if err != nil {
		return nil, err
	}
	lexer := NewLexer(src)
	lexer.Context = &SourceContext{Filepath: fpath}
	return lexer, nil
}

func (l *Lexer) Scan() (tok *token.Token) {
	tok = &token.Token{}
	if l.pos >= len(l.src) {
		tok.Type = token.EOF
		tok.Pos.Offset, tok.Pos.Line, tok.Pos.Column = l.pos, l.line, l.column
		tok.Pos.Context = l.Context
		return
	}
	start, startLine, startColumn, end := l.pos, l.line, l.column, 0
	tok.Type = token.INVALID
	state, rune1, size := 0, rune(-1), 0
	for state != -1 {
		if l.pos >= len(l.src) {
			rune1 = -1
		} else {
			rune1, size = utf8.DecodeRune(l.src[l.pos:])
			l.pos += size
		}

		nextState := -1
		if rune1 != -1 {
			nextState = TransTab[state](rune1)
		}
		state = nextState

		if state != -1 {

			switch rune1 {
			case '\n':
				l.line++
				l.column = 1
			case '\r':
				l.column = 1
			case '\t':
				l.column += 4
			default:
				l.column++
			}

			switch {
			case ActTab[state].Accept != -1:
				tok.Type = ActTab[state].Accept
				end = l.pos
			case ActTab[state].Ignore != "":
				start, startLine, startColumn = l.pos, l.line, l.column
				state = 0
				if start >= len(l.src) {
					tok.Type = token.EOF
				}

			}
		} else {
			if tok.Type == token.INVALID {
				end = l.pos
			}
		}
	}
	if end > start {
		l.pos = end
		tok.Lit = l.src[start:end]
	} else {
		tok.Lit = []byte{}
	}
	tok.Pos.Offset, tok.Pos.Line, tok.Pos.Column = start, startLine, startColumn
	tok.Pos.Context = l.Context

	return
}

func (l *Lexer) Reset() {
	l.pos = 0
}

/*
Lexer symbols:
0: 'f'
1: 'F'
2: 'a'
3: 'A'
4: 'l'
5: 'L'
6: 's'
7: 'S'
8: 'e'
9: 'E'
10: 't'
11: 'T'
12: 'r'
13: 'R'
14: 'u'
15: 'U'
16: 'e'
17: 'E'
18: '.'
19: '.'
20: 'd'
21: 'D'
22: 'a'
23: 'A'
24: 't'
25: 'T'
26: 'e'
27: 'E'
28: 'd'
29: 'D'
30: 'a'
31: 'A'
32: 't'
33: 'T'
34: 'e'
35: 'E'
36: 't'
37: 'T'
38: 'i'
39: 'I'
40: 'm'
41: 'M'
42: 'e'
43: 'E'
44: 't'
45: 'T'
46: 'i'
47: 'I'
48: 'm'
49: 'M'
50: 'e'
51: 'E'
52: 't'
53: 'T'
54: 'i'
55: 'I'
56: 'm'
57: 'M'
58: 'e'
59: 'E'
60: 's'
61: 'S'
62: 't'
63: 'T'
64: 'a'
65: 'A'
66: 'm'
67: 'M'
68: 'p'
69: 'P'
70: 'n'
71: 'N'
72: 'u'
73: 'U'
74: 'm'
75: 'M'
76: 'e'
77: 'E'
78: 'r'
79: 'R'
80: 'i'
81: 'I'
82: 'c'
83: 'C'
84: 'd'
85: 'D'
86: 'e'
87: 'E'
88: 'c'
89: 'C'
90: 'i'
91: 'I'
92: 'm'
93: 'M'
94: 'a'
95: 'A'
96: 'l'
97: 'L'
98: 'b'
99: 'B'
100: 'i'
101: 'I'
102: 'g'
103: 'G'
104: 'n'
105: 'N'
106: 'u'
107: 'U'
108: 'm'
109: 'M'
110: 'e'
111: 'E'
112: 'r'
113: 'R'
114: 'i'
115: 'I'
116: 'c'
117: 'C'
118: 'b'
119: 'B'
120: 'i'
121: 'I'
122: 'g'
123: 'G'
124: 'd'
125: 'D'
126: 'e'
127: 'E'
128: 'c'
129: 'C'
130: 'i'
131: 'I'
132: 'm'
133: 'M'
134: 'a'
135: 'A'
136: 'l'
137: 'L'
138: 'a'
139: 'A'
140: 'r'
141: 'R'
142: 'r'
143: 'R'
144: 'a'
145: 'A'
146: 'y'
147: 'Y'
148: 's'
149: 'S'
150: 't'
151: 'T'
152: 'r'
153: 'R'
154: 'u'
155: 'U'
156: 'c'
157: 'C'
158: 't'
159: 'T'
160: 'n'
161: 'N'
162: 'u'
163: 'U'
164: 'l'
165: 'L'
166: 'l'
167: 'L'
168: 'f'
169: 'F'
170: 'o'
171: 'O'
172: 'r'
173: 'R'
174: 'm'
175: 'M'
176: 'a'
177: 'A'
178: 't'
179: 'T'
180: 's'
181: 'S'
182: 'e'
183: 'E'
184: 'l'
185: 'L'
186: 'e'
187: 'E'
188: 'c'
189: 'C'
190: 't'
191: 'T'
192: 'f'
193: 'F'
194: 'r'
195: 'R'
196: 'o'
197: 'O'
198: 'm'
199: 'M'
200: 'w'
201: 'W'
202: 'i'
203: 'I'
204: 't'
205: 'T'
206: 'h'
207: 'H'
208: 'a'
209: 'A'
210: 's'
211: 'S'
212: 't'
213: 'T'
214: 'o'
215: 'O'
216: 'a'
217: 'A'
218: 'n'
219: 'N'
220: 'd'
221: 'D'
222: 'o'
223: 'O'
224: 'r'
225: 'R'
226: 'i'
227: 'I'
228: 's'
229: 'S'
230: 'i'
231: 'I'
232: 'n'
233: 'N'
234: 'i'
235: 'I'
236: 'n'
237: 'N'
238: 't'
239: 'T'
240: 'e'
241: 'E'
242: 'r'
243: 'R'
244: 's'
245: 'S'
246: 'e'
247: 'E'
248: 'c'
249: 'C'
250: 't'
251: 'T'
252: 'u'
253: 'U'
254: 'n'
255: 'N'
256: 'i'
257: 'I'
258: 'o'
259: 'O'
260: 'n'
261: 'N'
262: 'u'
263: 'U'
264: 'n'
265: 'N'
266: 'i'
267: 'I'
268: 'o'
269: 'O'
270: 'n'
271: 'N'
272: 'n'
273: 'N'
274: 'o'
275: 'O'
276: 't'
277: 'T'
278: 'r'
279: 'R'
280: 'o'
281: 'O'
282: 'w'
283: 'W'
284: 'r'
285: 'R'
286: 'o'
287: 'O'
288: 'w'
289: 'W'
290: 's'
291: 'S'
292: 'r'
293: 'R'
294: 'a'
295: 'A'
296: 'n'
297: 'N'
298: 'g'
299: 'G'
300: 'e'
301: 'E'
302: 'f'
303: 'F'
304: 'o'
305: 'O'
306: 'l'
307: 'L'
308: 'l'
309: 'L'
310: 'o'
311: 'O'
312: 'w'
313: 'W'
314: 'i'
315: 'I'
316: 'n'
317: 'N'
318: 'g'
319: 'G'
320: 'p'
321: 'P'
322: 'r'
323: 'R'
324: 'e'
325: 'E'
326: 'c'
327: 'C'
328: 'e'
329: 'E'
330: 'd'
331: 'D'
332: 'i'
333: 'I'
334: 'n'
335: 'N'
336: 'g'
337: 'G'
338: 'c'
339: 'C'
340: 'u'
341: 'U'
342: 'r'
343: 'R'
344: 'r'
345: 'R'
346: 'e'
347: 'E'
348: 'n'
349: 'N'
350: 't'
351: 'T'
352: 'p'
353: 'P'
354: 'a'
355: 'A'
356: 'r'
357: 'R'
358: 't'
359: 'T'
360: 'i'
361: 'I'
362: 't'
363: 'T'
364: 'i'
365: 'I'
366: 'o'
367: 'O'
368: 'n'
369: 'N'
370: 'b'
371: 'B'
372: 'e'
373: 'E'
374: 't'
375: 'T'
376: 'w'
377: 'W'
378: 'e'
379: 'E'
380: 'e'
381: 'E'
382: 'n'
383: 'N'
384: 'r'
385: 'R'
386: 'e'
387: 'E'
388: 's'
389: 'S'
390: 'p'
391: 'P'
392: 'e'
393: 'E'
394: 'c'
395: 'C'
396: 't'
397: 'T'
398: 'i'
399: 'I'
400: 'g'
401: 'G'
402: 'n'
403: 'N'
404: 'o'
405: 'O'
406: 'r'
407: 'R'
408: 'e'
409: 'E'
410: 'n'
411: 'N'
412: 'u'
413: 'U'
414: 'l'
415: 'L'
416: 'l'
417: 'L'
418: 's'
419: 'S'
420: 'u'
421: 'U'
422: 'n'
423: 'N'
424: 'b'
425: 'B'
426: 'o'
427: 'O'
428: 'u'
429: 'U'
430: 'n'
431: 'N'
432: 'd'
433: 'D'
434: 'e'
435: 'E'
436: 'd'
437: 'D'
438: 'a'
439: 'A'
440: 'l'
441: 'L'
442: 'l'
443: 'L'
444: 'd'
445: 'D'
446: 'i'
447: 'I'
448: 's'
449: 'S'
450: 't'
451: 'T'
452: 'i'
453: 'I'
454: 'n'
455: 'N'
456: 'c'
457: 'C'
458: 't'
459: 'T'
460: 'e'
461: 'E'
462: 'x'
463: 'X'
464: 'c'
465: 'C'
466: 'e'
467: 'E'
468: 'p'
469: 'P'
470: 't'
471: 'T'
472: 'f'
473: 'F'
474: 'i'
475: 'I'
476: 'r'
477: 'R'
478: 's'
479: 'S'
480: 't'
481: 'T'
482: 'l'
483: 'L'
484: 'a'
485: 'A'
486: 's'
487: 'S'
488: 't'
489: 'T'
490: 'r'
491: 'R'
492: 'e'
493: 'E'
494: 'p'
495: 'P'
496: 'l'
497: 'L'
498: 'a'
499: 'A'
500: 'c'
501: 'C'
502: 'e'
503: 'E'
504: 'c'
505: 'C'
506: 'a'
507: 'A'
508: 's'
509: 'S'
510: 't'
511: 'T'
512: 'g'
513: 'G'
514: 'r'
515: 'R'
516: 'o'
517: 'O'
518: 'u'
519: 'U'
520: 'p'
521: 'P'
522: 'h'
523: 'H'
524: 'a'
525: 'A'
526: 'v'
527: 'V'
528: 'i'
529: 'I'
530: 'n'
531: 'N'
532: 'g'
533: 'G'
534: 'o'
535: 'O'
536: 'r'
537: 'R'
538: 'd'
539: 'D'
540: 'e'
541: 'E'
542: 'r'
543: 'R'
544: 'b'
545: 'B'
546: 'y'
547: 'Y'
548: 'a'
549: 'A'
550: 's'
551: 'S'
552: 'c'
553: 'C'
554: 'd'
555: 'D'
556: 'e'
557: 'E'
558: 's'
559: 'S'
560: 'c'
561: 'C'
562: 'l'
563: 'L'
564: 'i'
565: 'I'
566: 'm'
567: 'M'
568: 'i'
569: 'I'
570: 't'
571: 'T'
572: 'o'
573: 'O'
574: 'f'
575: 'F'
576: 'f'
577: 'F'
578: 's'
579: 'S'
580: 'e'
581: 'E'
582: 't'
583: 'T'
584: 'a'
585: 'A'
586: 't'
587: 'T'
588: 'z'
589: 'Z'
590: 'o'
591: 'O'
592: 'n'
593: 'N'
594: 'e'
595: 'E'
596: 'c'
597: 'C'
598: 'a'
599: 'A'
600: 's'
601: 'S'
602: 'e'
603: 'E'
604: 'w'
605: 'W'
606: 'h'
607: 'H'
608: 'e'
609: 'E'
610: 'n'
611: 'N'
612: 't'
613: 'T'
614: 'h'
615: 'H'
616: 'e'
617: 'E'
618: 'n'
619: 'N'
620: 'e'
621: 'E'
622: 'l'
623: 'L'
624: 's'
625: 'S'
626: 'e'
627: 'E'
628: 'e'
629: 'E'
630: 'n'
631: 'N'
632: 'd'
633: 'D'
634: 'u'
635: 'U'
636: 'n'
637: 'N'
638: 'n'
639: 'N'
640: 'e'
641: 'E'
642: 's'
643: 'S'
644: 't'
645: 'T'
646: 'j'
647: 'J'
648: 'o'
649: 'O'
650: 'i'
651: 'I'
652: 'n'
653: 'N'
654: 'c'
655: 'C'
656: 'r'
657: 'R'
658: 'o'
659: 'O'
660: 's'
661: 'S'
662: 's'
663: 'S'
664: 't'
665: 'T'
666: 'a'
667: 'A'
668: 'b'
669: 'B'
670: 'l'
671: 'L'
672: 'e'
673: 'E'
674: 's'
675: 'S'
676: 'a'
677: 'A'
678: 'm'
679: 'M'
680: 'p'
681: 'P'
682: 'l'
683: 'L'
684: 'e'
685: 'E'
686: 'p'
687: 'P'
688: 'e'
689: 'E'
690: 'r'
691: 'R'
692: 'c'
693: 'C'
694: 'e'
695: 'E'
696: 'n'
697: 'N'
698: 't'
699: 'T'
700: 'r'
701: 'R'
702: 'e'
703: 'E'
704: 'p'
705: 'P'
706: 'e'
707: 'E'
708: 'a'
709: 'A'
710: 't'
711: 'T'
712: 'a'
713: 'A'
714: 'b'
715: 'B'
716: 'l'
717: 'L'
718: 'e'
719: 'E'
720: 'f'
721: 'F'
722: 'u'
723: 'U'
724: 'l'
725: 'L'
726: 'l'
727: 'L'
728: 'o'
729: 'O'
730: 'u'
731: 'U'
732: 't'
733: 'T'
734: 'e'
735: 'E'
736: 'r'
737: 'R'
738: 'l'
739: 'L'
740: 'e'
741: 'E'
742: 'f'
743: 'F'
744: 't'
745: 'T'
746: 'r'
747: 'R'
748: 'i'
749: 'I'
750: 'g'
751: 'G'
752: 'h'
753: 'H'
754: 't'
755: 'T'
756: 'i'
757: 'I'
758: 'n'
759: 'N'
760: 'n'
761: 'N'
762: 'e'
763: 'E'
764: 'r'
765: 'R'
766: 'u'
767: 'U'
768: 's'
769: 'S'
770: 'i'
771: 'I'
772: 'n'
773: 'N'
774: 'g'
775: 'G'
776: 'o'
777: 'O'
778: 'n'
779: 'N'
780: 's'
781: 'S'
782: 'a'
783: 'A'
784: 'f'
785: 'F'
786: 'e'
787: 'E'
788: '_'
789: 'c'
790: 'C'
791: 'a'
792: 'A'
793: 's'
794: 'S'
795: 't'
796: 'T'
797: 'w'
798: 'W'
799: 'h'
800: 'H'
801: 'e'
802: 'E'
803: 'r'
804: 'R'
805: 'e'
806: 'E'
807: 'w'
808: 'W'
809: 'e'
810: 'E'
811: 'i'
812: 'I'
813: 'g'
814: 'G'
815: 'h'
816: 'H'
817: 't'
818: 'T'
819: 'w'
820: 'W'
821: 'i'
822: 'I'
823: 'n'
824: 'N'
825: 'd'
826: 'D'
827: 'o'
828: 'O'
829: 'w'
830: 'W'
831: 'e'
832: 'E'
833: 'x'
834: 'X'
835: 't'
836: 'T'
837: 'r'
838: 'R'
839: 'a'
840: 'A'
841: 'c'
842: 'C'
843: 't'
844: 'T'
845: 'o'
846: 'O'
847: 'v'
848: 'V'
849: 'e'
850: 'E'
851: 'r'
852: 'R'
853: 'i'
854: 'I'
855: 'n'
856: 'N'
857: 't'
858: 'T'
859: 'e'
860: 'E'
861: 'r'
862: 'R'
863: 'v'
864: 'V'
865: 'a'
866: 'A'
867: 'l'
868: 'L'
869: 'q'
870: 'Q'
871: 'u'
872: 'U'
873: 'a'
874: 'A'
875: 'l'
876: 'L'
877: 'i'
878: 'I'
879: 'f'
880: 'F'
881: 'y'
882: 'Y'
883: '-'
884: '-'
885: '\n'
886: '#'
887: '\n'
888: '/'
889: '*'
890: '*'
891: '*'
892: '/'
893: '`'
894: '`'
895: ';'
896: ','
897: '*'
898: '('
899: ')'
900: '.'
901: '+'
902: '-'
903: '~'
904: '/'
905: '@'
906: '0'
907: 'x'
908: 'X'
909: '"'
910: '"'
911: '"'
912: '`'
913: '''
914: '"'
915: '\n'
916: '"'
917: '"'
918: '"'
919: '''
920: '''
921: '''
922: '`'
923: '''
924: '"'
925: '\n'
926: '''
927: '''
928: '''
929: '"'
930: '`'
931: '''
932: '"'
933: '''
934: '`'
935: '"'
936: '''
937: '"'
938: '`'
939: '''
940: '"'
941: '''
942: '`'
943: '"'
944: '''
945: '''
946: '''
947: '''
948: '`'
949: '"'
950: '''
951: '''
952: '''
953: '"'
954: '"'
955: '"'
956: '`'
957: '"'
958: '"'
959: '"'
960: '"'
961: '\'
962: 'r'
963: 'R'
964: '\'
965: 'a'
966: 'b'
967: 'f'
968: 'n'
969: 'r'
970: 't'
971: 'v'
972: '"'
973: '?'
974: '`'
975: '\'
976: '''
977: '\'
978: '\'
979: 'x'
980: 'X'
981: '\'
982: 'U'
983: '\'
984: 'u'
985: '_'
986: '_'
987: ' '
988: '!'
989: '@'
990: '#'
991: '$'
992: '%'
993: '^'
994: '&'
995: '*'
996: '('
997: ')'
998: '-'
999: '['
1000: ']'
1001: '{'
1002: '}'
1003: ':'
1004: ';'
1005: ','
1006: '.'
1007: '?'
1008: '/'
1009: '~'
1010: '<'
1011: '>'
1012: '"'
1013: '\'
1014: '''
1015: 'b'
1016: 'B'
1017: 'r'
1018: 'R'
1019: 'b'
1020: 'B'
1021: 'b'
1022: 'B'
1023: 'r'
1024: 'R'
1025: 'e'
1026: 'E'
1027: '+'
1028: '-'
1029: ' '
1030: '\t'
1031: '\n'
1032: '\r'
1033: \u00a0
1034: '0'-'9'
1035: 'a'-'f'
1036: 'A'-'F'
1037: \u0001-'\t'
1038: '\v'-'!'
1039: '#'-'&'
1040: '('-'['
1041: ']'-'_'
1042: 'a'-\u007f
1043: \u0080-\ufffc
1044: \ufffe-\U0010ffff
1045: '0'-'7'
1046: \u0001-'\t'
1047: '\v'-\u007f
1048: \u0080-\ufffc
1049: \ufffe-\U0010ffff
1050: 'a'-'z'
1051: 'A'-'Z'
1052: .
*/
